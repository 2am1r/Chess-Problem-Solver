/* Stockfish Java's build.gradle */

//Plugins
plugins {
    //Adds Executable Manifest
    id 'application'

    //Generates IDEA files
    id 'idea'

    //Adds Java compilation with testing capabilities
    id 'java'
}

group 'Niflheim'
version = new Version(major: 1, minor: 0, revision: 0, build: 0)
mainClassName = 'xyz.niflheim.ClientTester'

sourceCompatibility = 1.8
targetCompatibility = 1.8

def client_version = "1.0.0_0"
def stockfish_version = "9"

repositories {
    mavenCentral()
}

dependencies {
    //Logback
    compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.2.3'

    //Typesafe Config
    compile group: 'com.typesafe', name: 'config', version: '1.3.3'

    testCompile group: 'junit', name: 'junit', version: '4.12'
}

class Version {
    String major, minor, revision, build

    String toString() {
        "${major}.${minor}.${revision}_${build}"
    }
}

new File("src/main/java/xyz/niflheim/exported/Exported.java").write("""
/*
 * file "exported.java". DO NOT EDIT MANUALLY. THIS FILE IS GENERATED BY GRADLE.
 */

package xyz.niflheim.exported;

public class Exported {
    /**
     * build.gradle > client > version
     */
    public static String Client_Version = "${client_version}";

    /**
     * build.gradle > stockfish > version
     */
    public static String Stockfish_Version = "${stockfish_version}";
}
""".trim(), "UTF-8")

//Tasks
tasks.withType(JavaCompile) {
    options.encoding = 'UTF-8'
}

task wrapper(type: Wrapper) {
    gradleVersion = '4.6'
}